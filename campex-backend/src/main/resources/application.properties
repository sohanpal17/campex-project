# Server
server.port=8080
spring.application.name=campex-backend

# Import Local Secrets (Ignored by Git) if they exist
spring.config.import=optional:classpath:application-local.properties

# Database (Supabase)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://db.cneixhutcrgpjoaepbts.supabase.co:5432/postgres}
spring.datasource.username=postgres
# Uses Env Var "SPRING_DATASOURCE_PASSWORD" or local secret
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Firebase
# For Docker/Render, we will pass the JSON content via Env Var "FIREBASE_CONFIG_CONTENT"
# But locally we use the file. Logic handled in FirebaseConfig.java or by mounting file.
# Simpler approach: Keep file path, but in Render we upload "Secret File" to this path.
firebase.config.path=${FIREBASE_CONFIG_PATH:classpath:firebase-service-account.json}

# Google Cloud Vision
google.cloud.project-id=campex-ves
# Same strict approach for Cloud Vision credentials
google.application.credentials=${GOOGLE_APPLICATION_CREDENTIALS:classpath:google-credentials.json.json}

# Cloudinary
cloudinary.cloud-name=dqqvplma0
cloudinary.api-key=${CLOUDINARY_API_KEY}
cloudinary.api-secret=${CLOUDINARY_API_SECRET}

# Email
# IMPORTANT: Set MAIL_PASSWORD environment variable in production for email functionality
# Using port 587 (STARTTLS) instead of 465 as many cloud providers (like Render) block port 465
spring.mail.host=smtp-relay.brevo.com
spring.mail.port=2525
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# App Config
app.college-domain=@ves.ac.in
# Allow all origins for Vercel deployment
app.cors.allowed-origins=*

# Jackson - Date serialization
# Write dates as ISO-8601 strings (not timestamps)
# Our custom JacksonConfig serializes LocalDateTime as UTC with 'Z' suffix
spring.jackson.serialization.write-dates-as-timestamps=false